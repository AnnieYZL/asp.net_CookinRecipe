<!--Comments-->
<div class="py-5 flex justify-center" id="comment">
    <div class="w-11/12 md:max-w-6xl w-full md:mx-8 md:flex md:max-w-5xl shadow-lg rounded-lg">
        <form class="w-full bg-white rounded-lg px-4 pt-2">
            <div class="flex flex-wrap -mx-3 mb-6">
                <h2 class="px-4 pt-3 pb-2 text-gray-800 text-lg font-medium">Bình luận</h2>
                <div class="w-full md:w-full px-3 mb-2 mt-2">
                    <textarea id="dish-new-comment-text"
                              class="bg-gray-100 rounded border border-gray-400 leading-normal resize-none w-full h-20 py-2 px-3 font-regular placeholder-gray-700 focus:outline-none focus:bg-white"
                              name="cmt" placeholder='Nhập bình luận của bạn' required></textarea>
                </div>
                <div class="w-full md:w-full flex items-start md:w-full px-3">
                    <div class="flex items-start w-1/2 text-gray-700 px-2 mr-auto">
                        <svg fill="none" class="w-5 h-5 text-gray-600 mr-1" viewBox="0 0 24 24"
                             stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                  d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        <p class="text-xs md:text-sm pt-px">Bạn phải đăng nhập trước khi bình luận</p>
                    </div>
                    <div class="-mr-1">
                        <input onClick="onCommentSubmitted()" type='submit'
                               class="bg-gradient-to-r from-blue-600 to-purple-600 text-white font-medium py-1 px-4 border rounded-lg tracking-wide mr-1 hover:bg-blue-700 cursor-pointer"
                               value='Gửi'>
                    </div>
                </div>
        </form>

        <!--Previously added comments-->
        <p id="dish-comments" class="mx-auto text-center text-sm font-medium text-gray-400 mt-4">
            Chưa có bình luận
            nào!
        </p>
        <div id="dish-no-comments" class="w-full px-4 pt-2 pb-2 mt-4">
            <!--foreach(var cmt in CommentDataService.ListComment(out, Model.Recipe.RecipeID))-->
            <div class="flex flex-row w-full p-2 border-t pt-4">
                <img class="w-14 md:w-20 h-14 md:h-20 mr-2 object-cover rounded-full cursor-pointer"
                     src="~/Themes/images/user/" />
                <div class="ml-2 w-full">
                    <div class="flex">
                        <div class="commentBox">
                            <h2 class="text-gray-800 text-lg font-medium mb-2 cursor-pointer">AnnieYZL</h2>
                            <p id="commentText" class="font-regular text-gray-600">Hello ae</p>
                            <textarea id="editInput" class="w-full hidden p-2 border rounded" rows="5"></textarea>
                            <div class="flex justify-end mt-2 hidden" id="editActions">
                                <button onclick="cancelEdit()"
                                        class="px-3 py-1 bg-gray-200 text-white rounded">
                                    Hủy
                                </button>
                                <button onclick="saveCmt()"
                                        class="ml-3 px-3 py-1 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded mr-2">
                                    Lưu
                                </button>
                            </div>
                        </div>
                        <div class="relative ml-auto">
                            <!-- Nút mở menu (icon 3 chấm dọc) -->
                            <button onclick="toggleOption(event)" class="p-2">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none"
                                     viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                          d="M12 6v.01M12 12v.01M12 18v.01" />
                                </svg>
                            </button>
                            <!-- Menu tùy chọn -->
                            <div id="optionbar"
                                 class="absolute right-0 mt-2 w-40 bg-white border rounded shadow-lg hidden">
                                <button class="block w-full text-left px-4 py-2 hover:bg-blue-50"
                                        onclick="editCmt()">
                                    <i class="fa fa-edit"></i> Chỉnh sửa
                                </button>
                                <button class="block w-full text-left px-4 py-2 hover:bg-blue-50 text-red-500"
                                        onclick="deleteCmt()">
                                    <i class="fa fa-trash-alt"></i> Xóa bình luận
                                </button>
                            </div>
                            <script>
                                function toggleOption(event) {
                                    event.stopPropagation();
                                    document.getElementById("optionbar").classList.toggle("hidden");
                                }

                                function closeOption(event) {
                                    if (!document.getElementById("optionbar").contains(event.target) && event.target.id !== "optionbar-button") {
                                        document.getElementById("optionbar").classList.add("hidden");
                                    }
                                }

                                function editCmt() {
                                    document.getElementById("optionbar").classList.add("hidden");
                                    document.getElementById("commentText").classList.add("hidden");
                                    document.getElementById("editInput").classList.remove("hidden");
                                    document.getElementById("editActions").classList.remove("hidden");
                                    document.getElementById("editInput").value = document.getElementById("commentText").innerText;
                                }

                                function saveCmt() {
                                    document.getElementById("commentText").innerText = document.getElementById("editInput").value;
                                    cancelEdit();
                                }

                                function cancelEdit() {
                                    document.getElementById("commentText").classList.remove("hidden");
                                    document.getElementById("editInput").classList.add("hidden");
                                    document.getElementById("editActions").classList.add("hidden");
                                }

                                function deleteCmt() {
                                    if (confirm("Bạn có chắc chắn muốn xóa bình luận này?")) {
                                        alert("Đã xóa bình luận!");
                                    }
                                }
                            </script>
                        </div>
                    </div>
                </div>
            </div>

        </div>
        <div class="mx-auto flex justify-center mt-6">
            <button class="px-4 py-2 mx-1 bg-gray-300 text-gray-700 rounded">«</button>
            <button class="px-4 py-2 mx-1 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded">
                1
            </button>
            <button class="px-4 py-2 mx-1 bg-gray-300 text-gray-700 rounded">2</button>
            <button class="px-4 py-2 mx-1 bg-gray-300 text-gray-700 rounded">3</button>
            <button class="px-4 py-2 mx-1 bg-gray-300 text-gray-700 rounded">»</button>
        </div>
    </div>
</div>
    </div>